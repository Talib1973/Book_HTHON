"use strict";(globalThis.webpackChunkbook_hthon=globalThis.webpackChunkbook_hthon||[]).push([[575],{1525(e,s,n){n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-1-ros2/week-4-pub-sub","title":"Week 4: ROS 2 Publisher-Subscriber Pattern","description":"Learning Objectives","source":"@site/docs/module-1-ros2/week-4-pub-sub.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/week-4-pub-sub","permalink":"/Book_HTHON/docs/module-1-ros2/week-4-pub-sub","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/week-4-pub-sub.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"week-4-pub-sub","title":"Week 4: ROS 2 Publisher-Subscriber Pattern","sidebar_position":3,"keywords":["ROS 2","publisher","subscriber","topic","message","pub-sub","rclpy"],"dependencies":["week-3-ros2-architecture"]},"sidebar":"roboticsSidebar","previous":{"title":"Week 3: ROS 2 Architecture","permalink":"/Book_HTHON/docs/module-1-ros2/week-3-ros2-architecture"},"next":{"title":"Week 5: ROS 2 Services and Actions","permalink":"/Book_HTHON/docs/module-1-ros2/week-5-services-actions"}}');var r=n(4848),l=n(8453);const t={id:"week-4-pub-sub",title:"Week 4: ROS 2 Publisher-Subscriber Pattern",sidebar_position:3,keywords:["ROS 2","publisher","subscriber","topic","message","pub-sub","rclpy"],dependencies:["week-3-ros2-architecture"]},o="Week 4: ROS 2 Publisher-Subscriber Pattern",a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Knowledge",id:"knowledge",level:3},{value:"Software/Hardware",id:"softwarehardware",level:3},{value:"Conceptual Explanation",id:"conceptual-explanation",level:2},{value:"Publisher-Subscriber Pattern",id:"publisher-subscriber-pattern",level:3},{value:"How It Works",id:"how-it-works",level:3},{value:"Quality of Service (QoS)",id:"quality-of-service-qos",level:3},{value:"Hands-On Lab",id:"hands-on-lab",level:2},{value:"Task 1: Create Subscriber Node",id:"task-1-create-subscriber-node",level:3},{value:"Step 1: Create Subscriber",id:"step-1-create-subscriber",level:4},{value:"Step 2: Update setup.py",id:"step-2-update-setuppy",level:4},{value:"Step 3: Build and Test",id:"step-3-build-and-test",level:4},{value:"Task 2: Custom Message Type",id:"task-2-custom-message-type",level:3},{value:"Step 1: Define Custom Message",id:"step-1-define-custom-message",level:4},{value:"Step 2: Update package.xml",id:"step-2-update-packagexml",level:4},{value:"Step 3: Update CMakeLists.txt (for ament_cmake) or setup.py (for ament_python)",id:"step-3-update-cmakeliststxt-for-ament_cmake-or-setuppy-for-ament_python",level:4},{value:"Step 4: Publish Custom Message",id:"step-4-publish-custom-message",level:4},{value:"Task 3: QoS Configuration",id:"task-3-qos-configuration",level:3},{value:"Debugging with ros2cli",id:"debugging-with-ros2cli",level:2},{value:"Inspect Topic Communication",id:"inspect-topic-communication",level:3},{value:"Inspect Node Communication",id:"inspect-node-communication",level:3},{value:"Common Errors &amp; Fixes",id:"common-errors--fixes",level:2},{value:"Error 1: &quot;No publishers available for topic&quot;",id:"error-1-no-publishers-available-for-topic",level:3},{value:"Error 2: &quot;QoS mismatch: Publisher and Subscriber have incompatible QoS&quot;",id:"error-2-qos-mismatch-publisher-and-subscriber-have-incompatible-qos",level:3},{value:"Error 3: &quot;Message type mismatch&quot;",id:"error-3-message-type-mismatch",level:3},{value:"Error 4: &quot;Callback not executing&quot;",id:"error-4-callback-not-executing",level:3},{value:"External Resources",id:"external-resources",level:2},{value:"Assessment Questions",id:"assessment-questions",level:2},{value:"Further Reading",id:"further-reading",level:2},{value:"Advanced Topics",id:"advanced-topics",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"week-4-ros-2-publisher-subscriber-pattern",children:"Week 4: ROS 2 Publisher-Subscriber Pattern"})}),"\n",(0,r.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(s.p,{children:"By the end of this week, you will be able to:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Implement"})," both publisher and subscriber nodes using rclpy"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Understand"})," Quality of Service (QoS) profiles and their impact on message delivery"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Create"})," custom message types for domain-specific data"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Debug"})," publisher-subscriber connections using ros2cli tools"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Design"})," topic-based communication for real-time sensor data streaming"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(s.h3,{id:"knowledge",children:"Knowledge"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Completion of Week 3 (ROS 2 Architecture)"}),"\n",(0,r.jsx)(s.li,{children:"Understanding of callback functions in Python"}),"\n",(0,r.jsx)(s.li,{children:"Familiarity with ROS 2 message types (std_msgs, geometry_msgs)"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"softwarehardware",children:"Software/Hardware"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"ROS 2 Humble with workspace from Week 3"}),"\n",(0,r.jsx)(s.li,{children:"Python 3.10+"}),"\n",(0,r.jsx)(s.li,{children:"ros2cli tools installed"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"conceptual-explanation",children:"Conceptual Explanation"}),"\n",(0,r.jsx)(s.h3,{id:"publisher-subscriber-pattern",children:"Publisher-Subscriber Pattern"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.strong,{children:"pub-sub pattern"})," is ROS 2's primary mechanism for ",(0,r.jsx)(s.strong,{children:"asynchronous"}),", ",(0,r.jsx)(s.strong,{children:"one-to-many"})," data streaming."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Key Characteristics"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Decoupled"}),": Publishers don't know about subscribers (and vice versa)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Asynchronous"}),": Publishers don't wait for subscribers to process messages"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Scalable"}),": One publisher can broadcast to unlimited subscribers"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Real-time"}),": Ideal for high-frequency sensor data (camera, LIDAR, IMU)"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Publisher"})," creates a topic with a specific message type"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"DDS Discovery"}),": Middleware announces topic availability"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Subscribers"})," register interest in the topic"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Message Flow"}),": Publisher sends messages \u2192 DDS routes to all subscribers"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Callbacks"}),": Each subscriber's callback executes independently"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"quality-of-service-qos",children:"Quality of Service (QoS)"}),"\n",(0,r.jsxs)(s.p,{children:["QoS policies control ",(0,r.jsx)(s.strong,{children:"reliability"}),", ",(0,r.jsx)(s.strong,{children:"durability"}),", and ",(0,r.jsx)(s.strong,{children:"latency"})," trade-offs."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Common QoS Profiles"}),":"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Profile"}),(0,r.jsx)(s.th,{children:"Reliability"}),(0,r.jsx)(s.th,{children:"Durability"}),(0,r.jsx)(s.th,{children:"Use Case"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"SENSOR_DATA"})}),(0,r.jsx)(s.td,{children:"Best effort"}),(0,r.jsx)(s.td,{children:"Volatile"}),(0,r.jsx)(s.td,{children:"High-frequency sensor streams (LIDAR, camera)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"RELIABLE"})}),(0,r.jsx)(s.td,{children:"Reliable"}),(0,r.jsx)(s.td,{children:"Volatile"}),(0,r.jsx)(s.td,{children:"Commands, control signals"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"SYSTEM_DEFAULT"})}),(0,r.jsx)(s.td,{children:"Reliable"}),(0,r.jsx)(s.td,{children:"Volatile"}),(0,r.jsx)(s.td,{children:"General-purpose topics"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"QoS Parameters"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reliability"}),": Best-effort (UDP-like) vs Reliable (TCP-like with retries)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Durability"}),": Volatile (discard old messages) vs Transient-local (keep for late joiners)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"History"}),": Keep-last-N vs Keep-all messages"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"hands-on-lab",children:"Hands-On Lab"}),"\n",(0,r.jsx)(s.h3,{id:"task-1-create-subscriber-node",children:"Task 1: Create Subscriber Node"}),"\n",(0,r.jsx)(s.p,{children:"Building on Week 3's publisher, create a subscriber that receives messages."}),"\n",(0,r.jsx)(s.h4,{id:"step-1-create-subscriber",children:"Step 1: Create Subscriber"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",metastring:'title="subscriber.py"',children:'#!/usr/bin/env python3\n"""\nMinimal ROS 2 subscriber node that listens to the \'chatter\' topic.\n\nThis example demonstrates:\n- Creating a subscription to std_msgs/String messages\n- Implementing callback functions for message processing\n- QoS profile configuration (default)\n- Node lifecycle management\n"""\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalSubscriber(Node):\n    """A minimal subscriber node that receives Hello World messages."""\n\n    def __init__(self):\n        """Initialize the subscriber node with a subscription."""\n        super().__init__(\'minimal_subscriber\')\n\n        # Create subscription: topic=\'/chatter\', message_type=String, callback=listener_callback, queue_size=10\n        self.subscription = self.create_subscription(\n            String,\n            \'chatter\',\n            self.listener_callback,\n            10\n        )\n        self.subscription  # Prevent unused variable warning\n\n    def listener_callback(self, msg):\n        """\n        Callback function executed whenever a message is received.\n\n        Args:\n            msg (std_msgs.msg.String): The received message object\n        """\n        self.get_logger().info(f\'I heard: "{msg.data}"\')\n\n\ndef main(args=None):\n    """Main entry point for the ROS 2 subscriber node."""\n    rclpy.init(args=args)\n\n    node = MinimalSubscriber()\n\n    try:\n        rclpy.spin(node)  # Keep node running and processing callbacks\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,r.jsx)(s.h4,{id:"step-2-update-setuppy",children:"Step 2: Update setup.py"}),"\n",(0,r.jsx)(s.p,{children:"Add subscriber entry point:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",metastring:'title="setup.py"',children:"entry_points={\n    'console_scripts': [\n        'publisher = minimal_publisher.publisher:main',\n        'subscriber = minimal_publisher.subscriber:main',\n    ],\n},\n"})}),"\n",(0,r.jsx)(s.h4,{id:"step-3-build-and-test",children:"Step 3: Build and Test"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select minimal_publisher\nsource install/setup.bash\n\n# Terminal 1: Start publisher\nros2 run minimal_publisher publisher\n\n# Terminal 2: Start subscriber\nros2 run minimal_publisher subscriber\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Expected Output (Subscriber Terminal)"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'[INFO] [minimal_subscriber]: I heard: "Hello World: 0"\n[INFO] [minimal_subscriber]: I heard: "Hello World: 1"\n[INFO] [minimal_subscriber]: I heard: "Hello World: 2"\n'})}),"\n",(0,r.jsx)(s.h3,{id:"task-2-custom-message-type",children:"Task 2: Custom Message Type"}),"\n",(0,r.jsx)(s.p,{children:"Create a custom message for robot sensor data."}),"\n",(0,r.jsx)(s.h4,{id:"step-1-define-custom-message",children:"Step 1: Define Custom Message"}),"\n",(0,r.jsxs)(s.p,{children:["Create ",(0,r.jsx)(s.code,{children:"msg/SensorData.msg"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",metastring:'title="msg/SensorData.msg"',children:"# Custom message for robot sensor readings\n# Demonstrates compound message types with primitives and arrays\n\nstd_msgs/Header header    # Timestamp and frame_id\nfloat64 temperature       # Temperature in Celsius\nfloat64 humidity          # Relative humidity (0-100%)\nfloat64[] distances       # Array of distance measurements in meters\nstring sensor_id          # Unique sensor identifier\n"})}),"\n",(0,r.jsx)(s.h4,{id:"step-2-update-packagexml",children:"Step 2: Update package.xml"}),"\n",(0,r.jsx)(s.p,{children:"Add message dependencies:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-xml",metastring:'title="package.xml"',children:"<build_depend>rosidl_default_generators</build_depend>\n<exec_depend>rosidl_default_runtime</exec_depend>\n<member_of_group>rosidl_interface_packages</member_of_group>\n"})}),"\n",(0,r.jsx)(s.h4,{id:"step-3-update-cmakeliststxt-for-ament_cmake-or-setuppy-for-ament_python",children:"Step 3: Update CMakeLists.txt (for ament_cmake) or setup.py (for ament_python)"}),"\n",(0,r.jsx)(s.p,{children:"For ament_python packages, use:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",metastring:'title="setup.py"',children:"from glob import glob\nimport os\n\n# ...\n\ndata_files=[\n    # ...\n    (os.path.join('share', package_name, 'msg'), glob('msg/*.msg')),\n],\n"})}),"\n",(0,r.jsx)(s.h4,{id:"step-4-publish-custom-message",children:"Step 4: Publish Custom Message"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",metastring:'title="sensor_publisher.py"',children:'#!/usr/bin/env python3\n"""\nPublisher node for custom SensorData messages.\n\nDemonstrates:\n- Publishing custom message types\n- Populating Header with timestamp\n- Using arrays in messages\n- Simulating sensor readings\n"""\n\nimport rclpy\nfrom rclpy.node import Node\nfrom minimal_publisher.msg import SensorData  # Import custom message\nfrom std_msgs.msg import Header\nimport random\n\n\nclass SensorPublisher(Node):\n    """Publishes simulated sensor data at 10 Hz."""\n\n    def __init__(self):\n        """Initialize sensor publisher with timer."""\n        super().__init__(\'sensor_publisher\')\n\n        self.publisher_ = self.create_publisher(SensorData, \'sensor_readings\', 10)\n        self.timer = self.create_timer(0.1, self.publish_sensor_data)  # 10 Hz\n\n    def publish_sensor_data(self):\n        """Generate and publish simulated sensor readings."""\n        msg = SensorData()\n\n        # Populate header with timestamp\n        msg.header = Header()\n        msg.header.stamp = self.get_clock().now().to_msg()\n        msg.header.frame_id = \'sensor_frame\'\n\n        # Simulate sensor readings\n        msg.temperature = 20.0 + random.uniform(-5.0, 5.0)\n        msg.humidity = 50.0 + random.uniform(-10.0, 10.0)\n        msg.distances = [random.uniform(0.1, 5.0) for _ in range(8)]  # 8 distance sensors\n        msg.sensor_id = \'env_sensor_01\'\n\n        self.publisher_.publish(msg)\n        self.get_logger().info(f\'Publishing: temp={msg.temperature:.2f}\xb0C, humidity={msg.humidity:.1f}%\')\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = SensorPublisher()\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,r.jsx)(s.h3,{id:"task-3-qos-configuration",children:"Task 3: QoS Configuration"}),"\n",(0,r.jsx)(s.p,{children:"Configure QoS for different reliability requirements."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",metastring:'title="qos_publisher.py"',children:'"""\nDemonstrate Quality of Service (QoS) configuration for publishers.\n\nQoS profiles control message delivery guarantees, latency, and durability.\n"""\n\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy, HistoryPolicy\n\n\n# Sensor data: Best-effort, volatile (prioritize latency over reliability)\nsensor_qos = QoSProfile(\n    reliability=ReliabilityPolicy.BEST_EFFORT,  # Allow message loss\n    durability=DurabilityPolicy.VOLATILE,       # Don\'t store for late joiners\n    history=HistoryPolicy.KEEP_LAST,\n    depth=10\n)\n\n# Command data: Reliable, volatile (ensure delivery, no history)\ncommand_qos = QoSProfile(\n    reliability=ReliabilityPolicy.RELIABLE,     # Retry until delivered\n    durability=DurabilityPolicy.VOLATILE,\n    history=HistoryPolicy.KEEP_LAST,\n    depth=10\n)\n\n# Create publisher with custom QoS\nself.publisher_ = self.create_publisher(String, \'sensor_data\', sensor_qos)\n'})}),"\n",(0,r.jsx)(s.h2,{id:"debugging-with-ros2cli",children:"Debugging with ros2cli"}),"\n",(0,r.jsx)(s.h3,{id:"inspect-topic-communication",children:"Inspect Topic Communication"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# List all active topics\nros2 topic list\n\n# Get topic info (type, publisher/subscriber count, QoS)\nros2 topic info /chatter\n\n# Echo messages in real-time\nros2 topic echo /chatter\n\n# Check message publishing rate\nros2 topic hz /chatter\n\n# Get topic bandwidth usage\nros2 topic bw /chatter\n\n# Publish from command line (for testing)\nros2 topic pub /chatter std_msgs/msg/String \"data: 'Test message'\"\n"})}),"\n",(0,r.jsx)(s.h3,{id:"inspect-node-communication",children:"Inspect Node Communication"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Get node info (publishers, subscribers, services)\nros2 node info /minimal_publisher\n\n# Check if topic has publishers\nros2 topic info /chatter --verbose\n"})}),"\n",(0,r.jsx)(s.h2,{id:"common-errors--fixes",children:"Common Errors & Fixes"}),"\n",(0,r.jsx)(s.h3,{id:"error-1-no-publishers-available-for-topic",children:'Error 1: "No publishers available for topic"'}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": Subscriber started before publisher, or publisher node crashed."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Verify publisher is running: ",(0,r.jsx)(s.code,{children:"ros2 node list"})]}),"\n",(0,r.jsxs)(s.li,{children:["Check topic exists: ",(0,r.jsx)(s.code,{children:"ros2 topic list"})]}),"\n",(0,r.jsxs)(s.li,{children:["Inspect QoS mismatch: ",(0,r.jsx)(s.code,{children:"ros2 topic info /topic_name --verbose"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"error-2-qos-mismatch-publisher-and-subscriber-have-incompatible-qos",children:'Error 2: "QoS mismatch: Publisher and Subscriber have incompatible QoS"'}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": Publisher uses BEST_EFFORT, subscriber requires RELIABLE (or vice versa)."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),": Align QoS profiles between publisher and subscriber."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Subscriber must match publisher's QoS\nself.subscription = self.create_subscription(\n    String,\n    'chatter',\n    self.callback,\n    qos_profile=sensor_qos  # Match publisher's QoS\n)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"error-3-message-type-mismatch",children:'Error 3: "Message type mismatch"'}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": Publisher and subscriber use different message types for same topic."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),": Ensure both use identical message type (e.g., ",(0,r.jsx)(s.code,{children:"std_msgs/msg/String"}),")."]}),"\n",(0,r.jsx)(s.h3,{id:"error-4-callback-not-executing",children:'Error 4: "Callback not executing"'}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": Node not spinning (",(0,r.jsx)(s.code,{children:"rclpy.spin()"})," not called)."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),": Always call ",(0,r.jsx)(s.code,{children:"rclpy.spin(node)"})," to process callbacks."]}),"\n",(0,r.jsx)(s.h2,{id:"external-resources",children:"External Resources"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html",children:"ROS 2 Topics Tutorial"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html",children:"QoS Policy Guide"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros2.org/latest/api/std_msgs/",children:"std_msgs API"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Custom-ROS2-Interfaces.html",children:"Custom Messages Tutorial"})}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"assessment-questions",children:"Assessment Questions"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"What happens if a subscriber is slow to process messages and the publisher queue fills up?"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) Publisher blocks until subscriber catches up"}),"\n",(0,r.jsx)(s.li,{children:"B) Oldest messages are dropped (with KEEP_LAST policy)"}),"\n",(0,r.jsx)(s.li,{children:"C) ROS 2 throws an error"}),"\n",(0,r.jsx)(s.li,{children:"D) DDS buffers messages indefinitely"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"Answer: B"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Which QoS reliability setting should be used for a 30 Hz camera stream?"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) RELIABLE (every frame must arrive)"}),"\n",(0,r.jsx)(s.li,{children:"B) BEST_EFFORT (allow frame drops for low latency)"}),"\n",(0,r.jsx)(s.li,{children:"C) TRANSIENT_LOCAL"}),"\n",(0,r.jsx)(s.li,{children:"D) KEEP_ALL"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"Answer: B (BEST_EFFORT prioritizes latency over reliability for real-time sensor data)"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"How does a subscriber receive messages published before it started?"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) Always receives all past messages"}),"\n",(0,r.jsx)(s.li,{children:"B) Only if QoS durability is TRANSIENT_LOCAL (not default VOLATILE)"}),"\n",(0,r.jsx)(s.li,{children:"C) Publisher must resend"}),"\n",(0,r.jsx)(s.li,{children:"D) Not possible in ROS 2"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"Answer: B"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.strong,{children:["In the callback function ",(0,r.jsx)(s.code,{children:"listener_callback(self, msg)"}),", what type is ",(0,r.jsx)(s.code,{children:"msg"}),"?"]})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) String (Python built-in)"}),"\n",(0,r.jsx)(s.li,{children:"B) std_msgs.msg.String object"}),"\n",(0,r.jsx)(s.li,{children:"C) Dictionary"}),"\n",(0,r.jsx)(s.li,{children:"D) Byte array"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"Answer: B"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.strong,{children:["What is the purpose of ",(0,r.jsx)(s.code,{children:"self.subscription"})," line after ",(0,r.jsx)(s.code,{children:"create_subscription()"}),"?"]})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) Start the subscription"}),"\n",(0,r.jsx)(s.li,{children:"B) Prevent Python garbage collector from deleting unused variable"}),"\n",(0,r.jsx)(s.li,{children:"C) Log subscription info"}),"\n",(0,r.jsx)(s.li,{children:"D) No purpose, can be removed"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"Answer: B"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Can one subscriber listen to multiple topics?"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) No, one subscriber per topic only"}),"\n",(0,r.jsxs)(s.li,{children:["B) Yes, call ",(0,r.jsx)(s.code,{children:"create_subscription()"})," multiple times with different topics"]}),"\n",(0,r.jsx)(s.li,{children:"C) Yes, but only with custom message types"}),"\n",(0,r.jsx)(s.li,{children:"D) Only if topics have the same message type"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"Answer: B"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsxs)(s.strong,{children:["Explain the difference between ",(0,r.jsx)(s.code,{children:"ros2 topic echo"})," and ",(0,r.jsx)(s.code,{children:"ros2 topic hz"}),"."]})," (Short answer)"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.em,{children:["Expected answer: ",(0,r.jsx)(s.code,{children:"ros2 topic echo"})," displays message content in real-time for debugging data values. ",(0,r.jsx)(s.code,{children:"ros2 topic hz"})," measures and reports the publishing frequency (messages per second) to verify timing requirements."]})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Why use custom message types instead of std_msgs/String for all data?"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"Expected answer: Custom messages provide type safety, enforce data structure, enable automatic serialization/deserialization, support code generation, and make message contracts explicit. Using String for everything requires manual parsing and loses compile-time type checking."})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.strong,{children:["What is the queue_size parameter (depth) in ",(0,r.jsx)(s.code,{children:"create_publisher()"}),"?"]})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) Maximum message size"}),"\n",(0,r.jsx)(s.li,{children:"B) Number of messages to buffer if network is slow"}),"\n",(0,r.jsx)(s.li,{children:"C) Number of subscribers allowed"}),"\n",(0,r.jsx)(s.li,{children:"D) Publishing frequency"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"Answer: B"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"How would you modify the publisher to send 100 messages per second?"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.em,{children:["Expected answer: Change timer period to ",(0,r.jsx)(s.code,{children:"self.create_timer(0.01, self.timer_callback)"})," (0.01 seconds = 100 Hz)"]})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,r.jsx)(s.h3,{id:"advanced-topics",children:"Advanced Topics"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Message Filters"}),": Synchronize multiple topics (e.g., camera + LIDAR)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"tf2"}),": Transform coordinate frames between sensors"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Bag Files"}),": Record and replay topic data with ",(0,r.jsx)(s.code,{children:"ros2 bag"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Lifecycle Nodes"}),": Managed node states for production systems"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Zero-Copy"}),": Intra-process communication without serialization"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"DDS Tuning"}),": Optimize transport for specific network conditions"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Callback Groups"}),": Parallelize callback execution with multi-threaded executors"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(s.p,{children:["Continue to ",(0,r.jsx)(s.strong,{children:"Week 5: Services and Actions"})," to learn:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Synchronous request-reply communication (services)"}),"\n",(0,r.jsx)(s.li,{children:"Long-running tasks with feedback (actions)"}),"\n",(0,r.jsx)(s.li,{children:"When to use topics vs services vs actions"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,s,n){n.d(s,{R:()=>t,x:()=>o});var i=n(6540);const r={},l=i.createContext(r);function t(e){const s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);